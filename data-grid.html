<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<link rel="stylesheet" type="text/css" href="data-grid.css">
	<script src="data-grid.js"></script>

	<style type="text/css">
		* {
			box-sizing: border-box;
		}
		html, body {
			height: 100%;
		}
		body {
			margin: 0;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		#parentDiv {
			height: 100%;
			width: 100%;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		#grid, #grid2, #grid3 {
			width: 30%;
			height: 90%;
		}
	</style>

	<script src="data.js"></script>
	<script>
		loadBulk(1000);

		var testGrid, testGrid2, testGrid3;
		document.addEventListener("DOMContentLoaded", function(e) {
			document.getElementById('grid').addEventListener('grid-loaded', function(e) {
				e.detail.gridObj.scrollY += 500;
			}, { capture: false });

			testGrid = new storkGrid({
				element: document.getElementById('grid'),
				data: window.bigData,
				rowHeight: 30,
				headerHeight: 50,
				selection: {
					multi: false,
					type: 'row'
				},
				columns: [
					{ dataName: 'id', displayName: 'ID', width: 46, fixed: false },
					{ dataName: 'eretz', displayName: 'Eretz', width: 80, minWidth: 70 },
					{ dataName: 'eer', displayName: 'Eer', width: 85, minWidth: 75, fixed: false },
					{ dataName: 'hai', displayName: 'Hai', width: 70 },
					{ dataName: 'tzomeah', displayName: 'Tzomeah', width: 80 },
					{ dataName: 'domem', displayName: 'Domem', width: 75 },
					{ dataName: 'yeled', displayName: 'Yeled' },
					{ dataName: 'yalda', displayName: 'Yalda' },
					{ dataName: 'reg-amount', displayName: 'Reg Amount', width: 80 },
					{ dataName: 'other_amount', displayName: 'Other Amount', width: 80 }
				],
				minColumnWidth: 50,
				trackBy: 'eretz',
				onload: function(e) { // another way to add onLoad listener
					e.detail.gridObj.scrollY += 2000;
				}
			});

			testGrid.addEventListener('select', function(e) {
				console.log('select: ', e.detail);
			}, false);
			testGrid.addEventListener('dblselect', function(e) {
				console.log('double select: ', e.detail);
			}, false);

			testGrid.addScrollEvent('almostHitBottom', 100); // when to emit
			testGrid.addEventListener('almostHitBottom', function(e) {
				var dataLength = testGrid.data.length;
				loadBulk(40);
				if(testGrid.data.length > dataLength) {
					testGrid.refreshData();
				}
			}, false);

			testGrid.addScrollEvent('almostHitTop', 100, false); // when to emit
			testGrid.addEventListener('almostHitTop', function(e) {
				var dataLength = testGrid.data.length;
				loadBulk(40, true);
				if(testGrid.data.length > dataLength) {
					testGrid.scrollY += 1200;
					testGrid.refreshData();
				}
			}, false);

			testGrid.addEventListener('sort', function(e) {
				console.log(e.detail);
			}, false);

			testGrid2 = new storkGrid({
				element: document.getElementById('grid2'),
				data: window.bigData,
				rowHeight: 30,
				headerHeight: 50,
				selection: {
					multi: false,
					type: 'row'
				},
				columns: [
					{ dataName: 'id', displayName: 'ID', width: 46, fixed: true },
					{ dataName: 'eretz', displayName: 'Eretz', width: 80, minWidth: 70 },
					{ dataName: 'eer', displayName: 'Eer', width: 85, minWidth: 75, fixed: true },
					{ dataName: 'hai', displayName: 'Hai', width: 70 },
					{ dataName: 'tzomeah', displayName: 'Tzomeah', width: 80 },
					{ dataName: 'domem', displayName: 'Domem', width: 75 },
					{ dataName: 'yeled', displayName: 'Yeled', width: 100 },
					{ dataName: 'yalda', displayName: 'Yalda', width: 95 },
					{ dataName: 'reg-amount', displayName: 'Reg Amount', width: 80 },
					{ dataName: 'other_amount', displayName: 'Other Amount', width: 80 }
				],
				minColumnWidth: 50,
				onload: function(e) { // another way to add onLoad listener
					e.detail.gridObj.scrollX += 50;
				}
			});

			testGrid3 = new storkGrid({
				element: document.getElementById('grid3'),
				data: window.bigData,
				rowHeight: 30,
				headerHeight: 50,
				selection: {
					multi: false,
					type: 'row'
				},
				columns: [
					{ dataName: 'id', displayName: 'ID', width: 46, fixed: false },
					{ dataName: 'eretz', displayName: 'Eretz', width: 80, minWidth: 70 },
					{ dataName: 'eer', displayName: 'Eer', width: 85, minWidth: 75, fixed: false },
					{ dataName: 'hai', displayName: 'Hai', width: 70 },
					{ dataName: 'yeled', displayName: 'Yeled' },
					{ dataName: 'yalda', displayName: 'Yalda' }
				],
				minColumnWidth: 50
			});
		});
	</script>
</head>
<body>
<div id="parentDiv">
	<div id="grid"></div>
	<div id="grid2"></div>
	<div id="grid3"></div>
</div>
</body>
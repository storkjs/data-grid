<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<link rel="stylesheet" type="text/css" href="data-grid.css">
	<script src="data-grid.js"></script>

	<style type="text/css">
		* {
			box-sizing: border-box;
		}
		html, body {
			height: 100%;
		}
		body {
			margin: 0;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		#grid {
			width: 90%;
			height: 90%;
		}
	</style>

	<script src="data.js"></script>
	<script>
		loadBulk(100);

		var testGrid;
		document.addEventListener("DOMContentLoaded", function(e) {
			testGrid = new storkGrid({
				element: document.getElementById('grid'),
				data: window.bigData,
				rowHeight: 30,
				headerHeight: 50,
				selection: {
					multi: false,
					type: 'row'
				},
				columns: [
//					 { dataName: 'id', displayName: 'ID', width: 20 },
//					 { dataName: 'eretz', displayName: 'Eretz', width: 80 },
//					 { dataName: 'eer', displayName: 'Eer', width: 85 },
//					 { dataName: 'hai', displayName: 'Hai', width: 70 },
//					 { dataName: 'tzomeah', displayName: 'Tzomeah', width: 80 },
//					 { dataName: 'domem', displayName: 'Domem', width: 80 }
				],
				trackBy: 'eretz'
			});

			testGrid.addEventListener('select', function(e) {
				console.log(e.detail);
			}, false);

			testGrid.addScrollEvent('almostHitBottom', 100);

			testGrid.addEventListener('almostHitBottom', function(e) {
				var dataLength = testGrid.data.length;
				loadBulk(40);
				if(testGrid.data.length > dataLength) {
					testGrid.refreshData();
				}
			}, false);

			testGrid.addScrollEvent('almostHitTop', 100, false);
			testGrid.addEventListener('almostHitTop', function(e) {
				var dataLength = testGrid.data.length;
				loadBulk(40, true);
				if(testGrid.data.length > dataLength) {
					testGrid.scrollY += 1200;
					testGrid.refreshData();
				}
			}, false);
		});
	</script>
</head>
<body>
<div id="grid"></div>
</body>